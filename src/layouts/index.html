{{ define "main" }}

{{"<!-- banner -->"| safeHTML}}
{{ with .Params.banner }}
{{ if .enable }}
<section class="hero-area" {{ partial `bg-image.html` (dict `Src` .bg_image) | safeHTMLAttr }}>
  <div class="">
    <div class="events-holder d-flex  justify-content-evenly">
      
      <i class="fa fa-star fa-xl" style="color:{{ $.Site.Params.variables.dark_pink }}"></i>
      <!-- Rrequire sorting out past events -->
	{{ range $page := (where $.Site.RegularPages "Section" "events" ).Reverse }}
		{{ $eventDate := index $page.Params.event_dates 0 }}
		{{ $eventDateParsed := time $eventDate }}
		{{ if gt $eventDateParsed.Unix  now }}
			<div class="home-event-item d-flex flex-column align-items-center justify-content-center">
				
        <h6 style="text-align: center;">
          <a href="{{ $page.RelPermalink }}" style="text-decoration: none; color: inherit;">
              {{ $page.Title }}</br>
              <p><strong>Date:</strong>
              {{ $count := len .Params.event_dates }} <!-- Get the total count -->
              {{ range $index, $date := .Params.event_dates }}
                  {{ $date }}{{ if ne (add $index 1) $count }}, {{ end }} <!-- Add comma if not the last item -->
              {{ end }}
          </a>
        </h6>
				<div>
				<a href="{{ .RelPermalink }}" class="event-button">Learn More</a>
				</div>
			</div>
		{{ end }}
	{{ end }}
	<i class="fa fa-star fa-xl" style="color:{{  $.Site.Params.variables.dark_pink }}"></i>
	</div>
    
  </div>
  <div class="container">
    <div class="row align-items-center justify-content-between">
      <div class="col-lg-6 ps-lg-0 text-lg-left">
        <h1 class="position-relative" data-aos="fade-up" data-aos-delay="100">{{ .title }}</h1>
        <h2 class="position-relative" data-aos="fade-up" data-aos-delay="100">{{ .subtitle }}</h2>  
        <h2 class="position-relative" data-aos="fade-up" data-aos-delay="100">{{ .moto }}</h2>
        <p class=" text-bigger-dark-green pb-3" data-aos="fade-up" data-aos-delay="200">{{ .content | markdownify }}</p>
        {{ if .button.enable }}
        {{ with .button }}
        <a href="{{ .link | absURL  }}" class="btn btn-primary" data-aos="fade-up" data-aos-delay="400">{{ .label }}</a>
        {{ end }}
        {{ end }}
      </div>
      <div class="col-lg-5 ps-lg-0 pt-5 pt-lg-0 text-lg-right text-center">
        <div data-aos="zoom-in" data-aos-delay="500">
          {{ partial "image.html" (dict "Src" .image "Alt" "illustration") }}
        </div>
      </div>
    </div>
  </div>
</section>
{{ end }}
{{ end }}
{{"<!-- /banner -->"| safeHTML}}

{{end}}